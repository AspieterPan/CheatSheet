---
Aliases: ["I/O 接口"]
tags: 计算机/组成原理/IO 
DateCreated: 2023-08-11T15:17
DateModified: 2024-10-01T00:12
---
# IO 接口

Top :: [[王道 - 计算机组成原理]] - 第七章 - 输入输出系统 - 7.2

- 数据寄存器
- 控制寄存器
- 状态寄存器

## I/O 接口的作用

- 数据缓冲
	- 通过数据缓冲寄存器 (DBR) 达到主机和外设工作速度的匹配
- 错误或状态监测
	- 通过状态寄存器反馈设备的各种错误、状态信息,供 CPU 查用
- 控制和定时
	- 接收从控制总线发来的控制信号、时钟信号
- 数据格式转换:
	- 串 - 并、并 - 串等格式转换
- 与主机和设备通信:
	- 实现主机 - I/0 接口 - I/0 设备之间的通信

## I/O 接口的结构

- 内部接口
	- 内部按口与系统总线 相连,实质上是与内存、CPU 相连。数据的传输方式~~只能是并行传输~~。
 - 外部接口:
	 - 外部接口通过接口电缆与外设相连,外部接口的数据传输可能是串行方式,因此 I/0 接口需具有串/并转换功能。

## I/O 接口的工作原理

1. 发命令:
	- 发送命令字到 I/0 控制寄存器,向设备发送命令 (需要驱动程序的协助)
2. 读状态:
	- 从状态寄存器读取状态字,获得设备或 l/0 控制器的状态信息
3. 读/写数据:
	- 从数据缓冲寄存器发送或读取数据,完成主机与与外设的数据交换

## 接口与端口

- 接口 Interface
	- 端口 Port
		- 数据端口
			- 读 & 写
		- 控制端口
			- 写
		- 状态端口
			- 读
	- 控制逻辑

> I/O 端口是指接口电路中可以被 CPU 直接访问的寄存器。

## 统一编制 VS 独立编制

- 统一编制
	- 把 I/O 端口当做存储器的单元进行地址分配,用统一的访存指令就可以访问 I/O 端口,又称**存储器映射方式**。
	- 靠不同的地址码区分内存和 I/O 设备,I/O 地址要求相对固定在地址的某部分。
	- 优点:
		- 不需要专门的输入/输出指令,所有访存指令都可直接访问端口,程序设计灵活性高
		- 端口有较大的编址空间
		- 读写控制逻辑电路简单
	- 缺点:
		- 端口占用了主存地址空间,使主存地址空间变小
		- 外设寻址时间长 (地址位数多,地址译码速度慢)
	- RISC 机器常用
- 独立编制
	- I/O 端口地址与存储器地址无关,独立编址 CPU 需要设置专门的输入/输出指令访问端口,又称 I/O 映射方式。
	- 靠不同的指令区分内存和 I/0 设备。只能用专门的 I/O 指令访问 I/O 端口
	- 优点:
		- 使用专用 I/O 指令,程序编制清晰
		- I/O 端口地址位数少,地址译码速度快
		- I/O 端口的地址不占用主存地址空间
	- 缺点:
		- I/O 指令类型少,一般只能对端口进行传送操作
		- 程序设计灵活性差
		- 需要 CPU 提供存储器读/写、I/O 设备读/写两组控制信号,增加了控制逻辑电路的复杂性
	- (Intel 处理器常用, IN、OUT 就是 IO 指令)

## I/O 接口的类型

- 按数据传送方式可分为
	- 并行接口:
		- 一个字节或一个字所有位同时传送。
	- 串行接口:
		- 一位一位地传送。
	- 注:
		- 这里所说的数据传送方式指的是外设和接口一侧的传送方式, 而在主机和接口一侧, ~~数据总是并行传送的~~。
		- 接口要完成数据格式转换。
- 按主机访问 I/O 设备的控制方式可分为
	- 程序查询接口
	- 中断接口
	- DMA 接口
- 按功能选择的灵活性可分为
	- 可编程接口
	- 不可编程接口
