---
Aliases: 
tags: Computer/Compose 
DateCreated: 2023-07-12T16:42
DateModified: 2023-07-12T17:04
---
# Cache 和主存的映射方式
Top:: [[Computer Compose]]

> [!question] 如何区分 Cache 中存放的是哪个主存块?
> 给每个 Cache 块增加一个 " 标记 ",记录对应的主存块号
> 还要增加 " 有效位 "

## 全相联映射
---
主存块可以放在 Cache 的任意位置

### " 全相联映射 " 如何访存?

1. CPU 访问主存地址 主存地址的前 22 位, 对比 Cache 中所有块的标记;
2. 若标记匹配且有效位=1, 则 Cache 命中, 访问块内地址为 对应地址 的单元。
3. 若未命中，则正常访问主存

## 直接映射
---
每个主存块只能放到一个特定的位置:
Cache 块号=主存块号 % Cache 总块数

- 缺点：
	- 其他地方有空闲 Cache 块, 但是对应主存块不能使用

### " 直接映射 " 如何访存

CPU 访问主存地址
1. 根据主存块号的后 3 位确定 Cache 行
2. 若主存块号的前 19 位与 Cache 标记匹配且有效位=1,则 Cache 命中,访问块内地址为对应地址的单元。
3. 若未命中或有效位 = 0,则正常访问主存

## 组相联映射
---
Cache 块分为若干组,每个主存块可放
到特定分组中的任意一个位置
组号=主存块号 % 分组数
