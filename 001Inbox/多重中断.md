---
Aliases: 
tags: Computer/Compose 
DateCreated: 2023-08-12T19:33
DateModified: 2023-08-14T05:10
---
# 多重中断

Top :: [[Computer Compose]] - 第七章 - 输入输出系统 - 7.3.3

## 单重中断与多重中断
---
- 单重中断:
	- 执行中断服务程序时不响应新的中断请求。
- 多重中断:
	- 又称中断嵌套,执行中断服务程序时可响应新的中断请求。

|  | 单重中断 | 多重中断 |
| :---: | :---: | :---: |
| $\begin{array}{l}\text { 中 } \\\text { 断 } \\\text { 隐 } \\\text { 指 } \\\text { 令 }\end{array}$ | 关中断 | 关中断 |
|  | 保存断点 (PC) | 保存断点 (PC) |
|  | 送中断向量 | 送中断向量 |
| $\begin{array}{l}\text { 中 } \\\text { 断 } \\\text { 服 } \\\text { 务 } \\\text { 程 } \\\text { 序 }\end{array}$ | 保护现场 | 保护现场和屏蔽字 |
|  | - | 开中断 |
|  | 执行中断服务程序 | 执行中断服务程序 |
|  | - | 关中断 |
|  | 恢复现场 | 恢复现场和屏蔽字 |
|  | 开中断 | 开中断 |
|  | 中断返回 | 中断返回 |

## 中断屏蔽技术
---
- 中断屏蔽技术主要用于多重中断,CPU 要具备多重中断的功能线,须满足下列条件。
	1. 在中断服务程序中提前设置开中断指令。
	2. 优先级别高的中断源有权中断优先级别低的中断源。
- 每个中断源都有一个屏蔽触发器表示屏蔽该中断源的请求表示可以正常申请,
	- 所有屏蔽触发器组合在一起,便构成一个屏蔽字寄存器,
	- 屏蔽字寄存器的内容称为屏蔽字。
- 屏蔽字设置的规律:
	1. 一般用 '1' 表示屏蔽,'0' 表示正常申请。
	2. 每个中断源对应一个屏蔽字 (在处理该中断源的中断服务程序时,屏蔽寄存器中的内容为该中断源对应的屏蔽字)。
	3. 屏蔽字中 '1' 越多,优先级越高。每个屏蔽字中至少有一个 '1'(至少要能屏蔽自身的中断)。

- IF
	- (InterruptFlag)
	- 开/关中断标志
	- 当 IF=1 时,表示开中断,当 IF=0 时表示关中断
- INTR:
	- 可屏蔽中断请求 (interrupt request) 信号,
	- 输入,
	- 用来申请一个硬件中断
	- 当 IF=1 时,若 INTR 保持高电平,则在当前指令执行完毕后就进入中断响应周期
- NMI
	- 非屏蔽中断 (non-maskable interrupt) 输入信号
	- 与 INTR 信号类似,但 NMI 中断不必检查|F 标志位是否为 1。
	- 常用于处理电源掉电紧急情况。
- INTA
	- 中断响应 (interrupt acknowledge) 信号,输出。
	- 响应 INTR 输入
	- 该引脚常用来选通中断向量码以响应中断请求。
