---
Aliases: 
tags: Computer/Compose DateCreated: 2023-07-12T15:53
DateModified: 2023-07-12T16:19
---

# Cache 的基本概念和原理

Top:: [[Computer Compose]]

## 存储系统存在的问题

---

双端口 RAM、多模块存储器提高存储器的工作速度
优化后内存读写速度与 CPU 差距依然很大
需要更高速的存储单元设计
存储器价格高、容量低

## Cache 的工作原理

---

将内存的一部分数据复制到 Cache 中，CPU 与 Cache 之间读写速度很快，Cache 与内存之间的速度相对较慢

> 注: 实际上,Cache 被集成在 CPU 内部
> Cache 用 SRAM 实现, 速度快,成本高

## [[局部性原理]]

---

### 空间局部性

空间局部性: 在最近的未来要用到的信息 (指令和数据),很可能与现在正在使用的信息在存储空间上是邻近的

### 时间局部性

时间局部性: 在最近的未来要用到的信息,很可能是现在正在使用的信息

## 性能分析

---

设 $t_{c}$ 为访问一次 Cache 所需时间,
$t_{m}$ 为访问一次主存所需时间

命中率 H:CPU 欲访问的信息已在 Cache 中的比率
缺失 (未命中) 率 M=1-H

Cache- 主存系统的平均访问时间 t 为
$t = Ht_{c} + (1-H)(t_{c}+t_{m})$

> 先访问 Cache，若 Cache 未命中再访问主存

或 $t = Ht_{c}+(1-H)t_{m}$

> 同时访问 Cache 和主存,若 Cache 命中则立即停止访问主存

> [!question] 基于[[局部性原理]],不难想到,可以把 CPU 目前访问的地址 " 周围 " 的部分数据放到 Cache 中。如何界定 " 周围 "?
> 将主存的存储空间 " 分块 " 如: 每 1KB 为一块。主存与 Cache 之间以 " 块 " 为单位进行数据交换

- 如何区分 Cache 与主存的数据块对应关系?
  - -- [[Cache 和主存的映射方式]]
- Cache 很小,主存很大。如果 Cache 满了怎么办?
  - -- [[Cache 替换算法]]
- CPU 修改了 Cache 中的数据副本,如何确保主存中数据母本的一致性?
  - -- [[Cache 写策略]]
