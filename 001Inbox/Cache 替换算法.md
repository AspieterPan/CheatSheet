---
Aliases: 
Tags: Computer/Compose 
DateCreated: 2023-07-24T17:08
DateModified: 2023-07-24T17:42
---
# Cache 替换算法
Top:: [[Computer Compose]]

- 随机算法（RAND）
	- 没有考虑 [[局部性原理]]，实现效果很差
- 先进先出算法（FIFO）
	- 依然没有考虑 [[局部性原理]]
	- 抖动现象：频繁的换入换出（刚被换出的块很快又被换入）
- 近期最少使用（LRU）
	- 为每个 Cache 设置一个 " 计数器 "，记录有多久没被访问了
	- 需要有一个 " 有效位 "，记录 Cache 是否空闲
	- Cache 满后替换 " 计数器 " 最大的
	- 基于 [[局部性原理]]，效果优秀，命中率高
	- 若被频繁访问的主存块 大于 Cache 行数量，则可能发生抖动
	- 算法规则
		- 1. 命中时，命中的计数器清零，比其低的计数器加 1，其余不变
			- 只增加比其低的计数器，仍然能保证大小顺序
			- 例如四个块计数器为 0、1、2、3，此时命中 2，只有 0、1 增加，四个块变为 1、2、0、3，仍然保持大小顺序
			- 此规则保证计数不会大于 Cache 块数量，使得计数器不会溢出
		- 2. 未命中且有空闲行时，新装入的计数器置 0，其余非空闲加 1
		- 3. 未命中且无空闲行时，计数值最大的行的信息块被淘汰，新装入的块计数器置 0，其余全加 1
- 最近不经常使用（LFU）
	- 同样设置 " 计数器 "，但记录 " 被访问过几次 "，替换计数最小的
	- 实际效果不如 LRU
		- 一个块可能在短时间内多次命中，导致计数非常大
		- 但是就算之后没有用到了，也会因为计数过大而一直留在 Cache 中
	- 算法规则
		- 新调入的块 = 0，之后每被访问一次 +1
		- 需要替换时，选择计数器最小的一行
		- 若有多个最小计数，可按行号递增或 FIFO 策略
